# 导入商品功能模块代码

## 一、需求分析和设计

### 1.1.产品原型

菜品列表效果图如下，涉及到的接口：

- 查询分类；
- 根据分类 Id，查询对应的菜品。

![菜品列表效果图](../NodeAssets/菜品列表效果图.png)

菜品口味效果图如下，涉及到的接口：

- 根据分类 Id，查询对应的菜品（会带出口味数据）。

![菜品口味效果图](../NodeAssets/菜品口味效果图.png)

套餐列表效果图如下，涉及到接口：

- 根据分类 Id，查询套餐。

![套餐列表效果图](../NodeAssets/套餐列表效果图.png)

套餐详情效果图如下，涉及到接口：

- 根据套餐 Id，查询菜品。

![套餐详情效果图](../NodeAssets/套餐详情效果图.png)

### 1.2.接口设计

根据上述原型图分析可知，共包含4个接口：

- 查询分类
- 根据分类id查询菜品
- 根据分类id查询套餐
- 根据套餐id查询包含的菜品

#### 1.2.1.查询分类接口

基本信息

**Path：** /user/category/list

**Method：** GET

接口描述：

请求参数

Query

| 参数名称 | 是否必须 | 示例 | 备注                            |
| -------- | -------- | ---- | ------------------------------- |
| type     | 否       | 1    | 分类类型：1 菜品分类 2 套餐分类 |

返回数据

| 名称          | 类型      | 是否必须 | 默认值 | 备注 | 其他信息          |
| ------------- | --------- | -------- | ------ | ---- | ----------------- |
| code          | integer   | 必须     |        |      | format: int32     |
| data          | object [] | 非必须   |        |      | item 类型: object |
| ├─ createTime | string    | 非必须   |        |      | format: date-time |
| ├─ createUser | integer   | 非必须   |        |      | format: int64     |
| ├─ id         | integer   | 非必须   |        |      | format: int64     |
| ├─ name       | string    | 非必须   |        |      |                   |
| ├─ sort       | integer   | 非必须   |        |      | format: int32     |
| ├─ status     | integer   | 非必须   |        |      | format: int32     |
| ├─ type       | integer   | 非必须   |        |      | format: int32     |
| ├─ updateTime | string    | 非必须   |        |      | format: date-time |
| ├─ updateUser | integer   | 非必须   |        |      | format: int64     |
| msg           | string    | 非必须   |        |      |                   |

#### 1.2.2.根据分类 id 查询菜品接口

基本信息

**Path：** /user/dish/list

**Method：** GET

接口描述：

请求参数

Query

| 参数名称   | 是否必须 | 示例 | 备注   |
| ---------- | -------- | ---- | ------ |
| categoryId | 是       | 101  | 分类id |

返回数据

| 名称            | 类型      | 是否必须 | 默认值 | 备注         | 其他信息          |
| --------------- | --------- | -------- | ------ | ------------ | ----------------- |
| code            | integer   | 必须     |        |              | format: int32     |
| data            | object [] | 非必须   |        |              | item 类型: object |
| ├─ categoryId   | integer   | 非必须   |        |              | format: int64     |
| ├─ categoryName | string    | 非必须   |        |              |                   |
| ├─ description  | string    | 非必须   |        |              |                   |
| ├─ flavors      | object [] | 非必须   |        | 菜品口味     | item 类型: object |
| ├─ dishId       | integer   | 非必须   |        |              | format: int64     |
| ├─ id           | integer   | 非必须   |        |              | format: int64     |
| ├─ name         | string    | 非必须   |        |              |                   |
| ├─ value        | string    | 非必须   |        |              |                   |
| ├─ id           | integer   | 非必须   |        |              | format: int64     |
| ├─ image        | string    | 非必须   |        | 菜品图片路径 |                   |
| ├─ name         | string    | 非必须   |        | 菜品名称     |                   |
| ├─ price        | number    | 非必须   |        | 价格         |                   |
| ├─ status       | integer   | 非必须   |        |              | format: int32     |
| ├─ updateTime   | string    | 非必须   |        |              | format: date-time |
| msg             | string    | 非必须   |        |              |                   |

#### 1.2.3.根据分类 id 查询套餐接口

基本信息

**Path：** /user/setmeal/list

**Method：** GET

接口描述：

请求参数

Query

| 参数名称   | 是否必须 | 示例 | 备注   |
| ---------- | -------- | ---- | ------ |
| categoryId | 是       | 101  | 分类id |

返回数据

| 名称           | 类型      | 是否必须 | 默认值 | 备注 | 其他信息          |
| -------------- | --------- | -------- | ------ | ---- | ----------------- |
| code           | integer   | 必须     |        |      | format: int32     |
| data           | object [] | 非必须   |        |      | item 类型: object |
| ├─ categoryId  | integer   | 非必须   |        |      | format: int64     |
| ├─ createTime  | string    | 非必须   |        |      | format: date-time |
| ├─ createUser  | integer   | 非必须   |        |      | format: int64     |
| ├─ description | string    | 非必须   |        |      |                   |
| ├─ id          | integer   | 非必须   |        |      | format: int64     |
| ├─ image       | string    | 非必须   |        |      |                   |
| ├─ name        | string    | 非必须   |        |      |                   |
| ├─ price       | number    | 非必须   |        |      |                   |
| ├─ status      | integer   | 非必须   |        |      | format: int32     |
| ├─ updateTime  | string    | 非必须   |        |      | format: date-time |
| ├─ updateUser  | integer   | 非必须   |        |      | format: int64     |
| msg            | string    | 非必须   |        |      |                   |

#### 1.2.4.根据套餐 id 查询包含的菜品接口

基本信息

**Path：** /user/setmeal/dish/{id}

**Method：** GET

接口描述：

请求参数

路径参数

| 参数名称 | 示例 | 备注   |
| -------- | ---- | ------ |
| id       | 101  | 套餐id |

返回数据

| 名称           | 类型      | 是否必须 | 默认值 | 备注         | 其他信息          |
| -------------- | --------- | -------- | ------ | ------------ | ----------------- |
| code           | integer   | 必须     |        |              | format: int32     |
| data           | object [] | 必须     |        |              | item 类型: object |
| ├─ copies      | integer   | 必须     |        | 份数         | format: int32     |
| ├─ description | string    | 必须     |        | 菜品描述     |                   |
| ├─ image       | string    | 必须     |        | 菜品图片路径 |                   |
| ├─ name        | string    | 必须     |        | 菜品名称     |                   |
| msg            | string    | 非必须   |        |              |                   |
